
<!DOCTYPE html>
<html>
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script async src="https://cse.google.com/cse.js?cx=315531be7c52f5156"></script>
    <title>
      
        Tratteria
      
    </title>
    <link rel="stylesheet" href="/css/style.1df9f62415d297f5c54d2fc02d71b1b122e108253802ae8fa49b752f0120f199.css" integrity="sha256-Hfn2JBXSl/XFTS/ALXGxsSLhCCU4Aq6PpJt1LwEg8Zk=">

    


<link rel="shortcut icon" href="/favicon.svg">


    
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
<script src="/js/app.09103495742f46957c0ccfe21325d1eb09374faea4d172abd0531e9d9fe6ea17.js" type="module" integrity="sha256-CRA0lXQvRpV8DM/iEyXR6wk3T66k0XKr0FMenZ/m6hc="></script>


  </head>

    <body>
      






<div class="navbar navbar-expand-lg navbar-light bg-light sticky-top" role="navigation" aria-label="main navigation">
  <div class="container nav-container">
    <div class="navbar-brand">
      <a class="navbar-item text-hide" href="https://tratteria.io/">
        Tratteria
        
        
          <img src="/img/logos/text-image-logo.svg" class="logo">
        
      </a>
    </div>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-nav" aria-controls="main-nav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="main-nav">
      <ul class="navbar-nav mr-auto">
        
        
        
        <li class="navbar-start navbar-item">
          
          <a class="nav-link" href="/">
            Home
          </a>
          
        
        <li class="navbar-start navbar-item is-active">
          
          <a class="nav-link" href="/docs/">
            Documentation
          </a>
          
        </li>
        
      </ul>
      <div class="gcse-search"></div>
    </div>
  </div> 
</div>

    <main class="content">
      
  <header>
    <div>
      <div class="container mt-4 mb-4 pb-2">
  <section class="row">
      
  </section>
</section>
</div>

    </div>
  </header>
  <div class="container">
      <section class="row">
        <section class="col">
           
 
 




<nav class="section-nav">
      <p class="menu-label open" id="leftnavToggle">Documentation:</p>      
      <ul class="menu-list" id="leftnav">
        <li><a  class="active"  href="/docs/">Introduction to Tratteria</a>
        
        </li>
    
        <li><a  class="active"  href="/docs/quickstart/">Quickstart Guide for Tratteria</a>
          <ul>
            
            <li>
                <a  class="active"  href="/docs/quickstart/running-tratteria/">Running Tratteria</a>
            </li>
            
            <li>
                <a  class="active"  href="/docs/quickstart/generating-trats/">Generatting TraTs</a>
            </li>
            
            <li>
                <a  class="active"  href="/docs/quickstart/verifying-trats/">Verifying TraTs</a>
            </li>
            
          </ul>
        </li>
    
        <li><a  class="active"  href="/docs/configuration/">Configuration Guide</a>
          <ul>
            
          </ul>
        </li>
    
        <li><a  class="active"  href="/docs/integration/">Integration Guide</a>
          <ul>
            
          </ul>
        </li>
    
        <li><a  class="active"  href="/docs/txn-token-format/">TraT Format</a>
          <ul>
            
          </ul>
        </li>
    
        <li><a  class="active"  href="/docs/replacement-txn-token/">Replacement TraTs</a>
          <ul>
            
          </ul>
        </li>
    
        <li><a  class="active"  href="/docs/call-chain-verification/">Call Chain Verification</a>
          <ul>
            
          </ul>
        </li>
    
        <li><a  class="active"  href="/docs/access-evaluation/">Access Evaluation</a>
          <ul>
            
          </ul>
        </li>
    

</nav>

        </section>
        <section class="col col-8">
          <h1 class="title">Introduction to Tratteria</h1>
          <p class="subtitle"></p>
          
<div class="content">
  <style>
.doc-image {
    display: block;
    margin: 50px;
    padding: 0;
}
</style>
<p>Welcome to the documentation for Tratteria, an open-source Transaction Tokens (TraTs) Service. This section provides an overview of TraTs and Tratteria.</p>
<h2 id="background">
  Background
  <a href="#background">
    <span class="icon hashlink">
      <i class="fas fa-link"></i>
    </span>
  </a>
</h2>
<h3 id="microservices">
  Microservices
  <a href="#microservices">
    <span class="icon hashlink">
      <i class="fas fa-link"></i>
    </span>
  </a>
</h3>
<p>Microservices architecture breakes down an application into smaller, independent services that interact through well-defined APIs. This approach offers several advantages including enhanced development speed and independent development.</p>
<p>Microservices are deployed and run within a secured &ldquo;virtual private cloud&rdquo; (VPC).</p>
<img src="/img/docs/introduction/microservices.svg" alt="Microservices Diagram" class="doc-image">
<h3 id="security-limitations-of-vpcs">
  Security Limitations of VPCs
  <a href="#security-limitations-of-vpcs">
    <span class="icon hashlink">
      <i class="fas fa-link"></i>
    </span>
  </a>
</h3>
<p>Despite providing a layer of security, VPCs are not impervious to threats:</p>
<ul>
<li><strong>Software Supply Chain Vulnerabilities:</strong> Malicious code can enter VPCs through the supply chain, potentially leading to Remote Code Execution (RCE) attacks within cloud environment.</li>
<li><strong>Privileged User Compromise:</strong> Insiders or attackers with elevated privileges can exploit their access, often remaining undetected and causing significant damage.</li>
</ul>
<h3 id="vpcs-need-more-security">
  VPCs Need More Security
  <a href="#vpcs-need-more-security">
    <span class="icon hashlink">
      <i class="fas fa-link"></i>
    </span>
  </a>
</h3>
<p>VPCs often rely on implicit trust models that can leave systems vulnerable. To enhance security, it&rsquo;s essential to transition towards a context-aware security model:</p>
<img src="/img/docs/introduction/vpc_security_concerns.svg" alt="VPC Security Concerns Diagram" class="doc-image">
<ul>
<li><strong>Implicit Trust</strong>: Services within the VPC trust each other.</li>
<li><strong>Service-to-Service Trust:</strong> Establishes mutual authentication and authorization between services.</li>
<li><strong>User Trust:</strong> Extends service-to-service trust to also assures the identity of the user making the request, confirming users are who they claim to be.</li>
<li><strong>Assured Context</strong>: Extends user trust to also assure the authorization context of the request.</li>
</ul>
<h2 id="moving-toward-assured-context-with-transaction-tokens">
  Moving Toward Assured Context with Transaction Tokens
  <a href="#moving-toward-assured-context-with-transaction-tokens">
    <span class="icon hashlink">
      <i class="fas fa-link"></i>
    </span>
  </a>
</h2>
<p>To address these vulnerabilities, Transaction Tokens (TraTs) represent an evolution from traditional security measures to a more robust, context-aware framework. TraTs offer assurance of both user identity and authorization context at every step of a transaction.</p>
<h3 id="transaction-tokens-trats">
  Transaction Tokens (TraTs)
  <a href="#transaction-tokens-trats">
    <span class="icon hashlink">
      <i class="fas fa-link"></i>
    </span>
  </a>
</h3>
<p>TraTs are short-lived, cryptographically signed JSON Web Tokens that immutably preserve the user identity and authorization context of an external API invocation. They ensure that the user identity and authorization details of an external request, such as an API call, are maintained across all involved services within a microservices application. Additionally, TraTs enable these services to assert their involvement in the transaction chain to downstream workloads.</p>
<h3 id="benefits-of-transaction-tokens-trats">
  Benefits of Transaction Tokens (TraTs)
  <a href="#benefits-of-transaction-tokens-trats">
    <span class="icon hashlink">
      <i class="fas fa-link"></i>
    </span>
  </a>
</h3>
<p>Transaction Tokens (TraTs) offer several benefits:</p>
<ul>
<li>
<p><strong>Prevention of Spurious Invocations</strong>: By verifying the presence of an external trigger, TraTs help prevent unauthorized internal calls within the network.</p>
</li>
<li>
<p><strong>Immutable Context Preservation</strong>: TraTs ensure that the user identity and authorization context of an external request are preserved across all workloads that process the request, helping prevent impersonation and unauthorized parameter modification.</p>
</li>
<li>
<p><strong>Call Chain Assertion</strong>: Allows workloads to immutably assert to downstream workloads that they were invoked in the call chain of the request.</p>
</li>
<li>
<p><strong>Reduction of Blast Radius</strong>: By validating each invocation in the chain, TraTs reduce the blast radius of security incidents. This limits the impact of compromised workloads, or malicious insiders, enhancing overall security and trust within the system.</p>
</li>
<li>
<p><strong>Short-Lived Tokens</strong>: TraTs are designed to be short-lived (e.g., 15 seconds), minimizing the risk of replay attacks if a token is discovered by an attacker.</p>
</li>
<li>
<p><strong>Independence from Access Tokens</strong>: TraTs do not incorporate external access tokens, thereby limiting exposure and minimizing the risk of token theft.</p>
</li>
<li>
<p><strong>Request Context Preservation</strong>: Preserves relevant request context information, such as IP address, authentication method, and requester workload, which can help downstream services make informed authorization decisions.</p>
</li>
</ul>
<h2 id="trats-service">
  TraTs Service
  <a href="#trats-service">
    <span class="icon hashlink">
      <i class="fas fa-link"></i>
    </span>
  </a>
</h2>
<p>The Transaction Token Service (TraTs Service) issues TraTs to requesting workloads. Requesting workloads authenticate to the TraT Service and request tokens by providing the necessary context, which the service uses to generate TraTs. A limited, pre-configured set of workloads, typically only the API gateway, can request TraTs. Secure methods, such as SPIFFE, are used to authenticate these workloads.</p>
<h3 id="how-it-works">
  How it Works
  <a href="#how-it-works">
    <span class="icon hashlink">
      <i class="fas fa-link"></i>
    </span>
  </a>
</h3>
<ul>
<li><strong>Initial Invocation</strong>: When a user invokes an external endpoint in an API microservice, the service authenticates the request using conventional authorization mechanisms (e.g., OAuth 2.0).</li>
<li><strong>Token Request</strong>: The API microservice uses OAuth Token Exchange to request a TraT from the TraTs Service, providing context about the request, such as request parameters, userâ€™s identity, and the initial authorization token.</li>
<li><strong>Token Issuance</strong>: The TraTs Service verifies the requesting service using secure methods such as SPIFFE, validates the request, and issues a TraT that includes immutable information about the user and the context of the request.</li>
<li><strong>Propagation</strong>: The API microservice uses the TraT to authorize its subsequent calls to internal services. These downstream services reuse the same token to authorize their subsequent calls to other services.</li>
<li><strong>Verification</strong>: Each service in the call chain independently verify the TraT to ensure that the request is valid and that the context has not been tampered with.</li>
</ul>
<img src="/img/docs/introduction/how_it_works.svg" alt="How It Works" class="doc-image">
<h2 id="what-is-tratteria">
  What is Tratteria?
  <a href="#what-is-tratteria">
    <span class="icon hashlink">
      <i class="fas fa-link"></i>
    </span>
  </a>
</h2>
<p>Tratteria is an open-source implementation of Transaction Tokens (TraTs) Service. It&rsquo;s designed to facilitate secure, reliable, and efficient TraTs issuance and verification in microservices systems. Tratteria can be seamlessly integrated into existing systems.</p>
<p>Tratteria supports a variety of configurations and is highly customizable to meet the specific needs of different environments. It is compatible with Service Meshes, Open Policy Agent (OPA), and SPIFEE, making it a flexible option for modern infrastructures. Whether you&rsquo;re running native services or containerized applications, Tratteria offers seamless integration.</p>
<img src="/img/docs/introduction/tratteria_workflow.svg" alt="Tratteria Workflow" class="doc-image">
<h2 id="acknowledgments">
  Acknowledgments
  <a href="#acknowledgments">
    <span class="icon hashlink">
      <i class="fas fa-link"></i>
    </span>
  </a>
</h2>
<p>This documentation and the underlying technology are based on the concepts and drafts developed by Atul Tulshibagwale (SGNL), George Fletcher (Capital One), and Pieter Kasselman (Microsoft).</p>
<p>For detailed discussions and updates, visit the <a href="https://mailarchive.ietf.org/arch/browse/oauth/" target="_blank" rel="noopener">OAuth Working Group mailing list</a> or the <a href="https://github.com/oauth-wg/oauth-transaction-tokens" target="_blank" rel="noopener">Github repository</a>.</p>

</div>


        </section>
        <section class="col d-none d-lg-block">
          



  <div class="toc">
    <p> On this page:</p>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#background">Background</a>
      <ul>
        <li><a href="#microservices">Microservices</a></li>
        <li><a href="#security-limitations-of-vpcs">Security Limitations of VPCs</a></li>
        <li><a href="#vpcs-need-more-security">VPCs Need More Security</a></li>
      </ul>
    </li>
    <li><a href="#moving-toward-assured-context-with-transaction-tokens">Moving Toward Assured Context with Transaction Tokens</a>
      <ul>
        <li><a href="#transaction-tokens-trats">Transaction Tokens (TraTs)</a></li>
        <li><a href="#benefits-of-transaction-tokens-trats">Benefits of Transaction Tokens (TraTs)</a></li>
      </ul>
    </li>
    <li><a href="#trats-service">TraTs Service</a>
      <ul>
        <li><a href="#how-it-works">How it Works</a></li>
      </ul>
    </li>
    <li><a href="#what-is-tratteria">What is Tratteria?</a></li>
    <li><a href="#acknowledgments">Acknowledgments</a></li>
  </ul>
</nav>
  </div>


        </section>
      </section>
    </div>

    </main>
    



<footer class="text-light bg-dark" style="padding: 20px 0; text-align: center;">
  <div class="footer">
    <p>Tratteria is an open-source project sponsored by <a href="https://www.sgnl.ai" target="_blank">SGNL.ai</a></p>
  </div>
  
  <div class="container">

    <div style="margin-bottom: 20px;">
      <i class="fab fa-github" style="font-size: 24px;"></i>
    </div>

    
    <div style="margin-bottom: 20px;">
      


<a class="btn text-light" style="background-color: #000000" href="https://github.com/SGNL-ai/Tratteria">
    
    <span class="icon">
      <i class="fab fa-github"></i>
    </span>
    
    
      GitHub
    
  </a>


    </div>
    

    <p style="margin-top: 20px;">
      &copy; 2024 SGNL.ai, Inc.
    </p>
  </div>
</footer>
  </body>
</html>
